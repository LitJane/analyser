## CLI - command line interface
### `export_ts.sh` Подготовка обучающего набора.
 
    Команда вынимает свежие документы из базы данных, пред-обрабатывает их 
    и сохраняет в подходящем для тренировки анализатора формате.
    
- использование:
```
  sh cli/export_ts.sh <limit>
```
  где `<limit>` -- максимально количество документов, 
  которое будет взято из базы; по-умолчанию limit=5000 

- информация о результате будет записана в `training_reports/export_trainset-result.ipynb`, 
  а так же в mlflow
- процесс может занимать около двух часов, если новых документов много.
- перед запуском нужно установить пременные среды 
```
GPN_DB_PORT=<порт МongoDb>
GPN_DB_HOST=<хост МongoDb>
MLFLOW_URL 
```

- пример:
```
  sh cli/export_ts.sh 100
```


### `train.sh` Обучение анализатора
  Эта команда запускает процесс обучения анализатора.
  - использование:
```
  sh train.sh <EPOCHS> <CHECKPOINT_URL>
```
  где `EPOCHS` = кол-во эпох обучения, 120 по-умолчанию, 
`CHECKPOINT_URL` = uri предобученной модели в mlflow, с которой можно начать дообучение  

- информация о результате будет записана в `training_reports/retrain_contract_uber_model-result.ipynb`, 
  а так же в mlflow
    
- обученная модель будет размещена в mlflow
  
- пример:
```
  sh cli/train.sh 150 runs:/89d43de209874227af95fcbeaf048340/model
```

- пример:
```
  sh cli/train.sh 
```

- пример:
```
  sh cli/train.sh 150
```

### `deploy.sh` Публикация нейронной модели
Команда устанавливает версию обученной модели
 - использование:
```
  sh cli/deploy.sh RUN_ID
```
`RUN_ID` = id записи в mlflow  

- пример:
```
  sh cli/deploy.sh 89d43de209874227af95fcbeaf048340
```